<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Assistant Dys - Adaptateur de texte et outils pour dyslexie, dyspraxie, dyscalculie">
    <title>Assistant Dys - SESSAD Petit Prince</title>
    
    <link rel="icon" type="image/png" href="favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <style>
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 4px 20px var(--shadow);
        }
        
        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: #f0f0f0;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }
        
        .tab-btn:hover {
            background: var(--dys-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .tab-btn.active {
            background: var(--dys-color);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: slideUp 0.4s ease-out;
        }
        
        /* Adaptateur de texte */
        .text-adapter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dys-color);
        }
        
        .adapted-text-area {
            background: white;
            padding: 25px;
            border-radius: 15px;
            min-height: 300px;
            line-height: 2;
            font-size: 18px;
        }
        
        .syllable {
            padding: 0 2px;
        }
        
        .syllable:nth-child(odd) {
            color: #000;
        }
        
        .syllable:nth-child(even) {
            color: #666;
        }
        
        .task-item {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border-left: 4px solid var(--dys-color);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .astuce-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border-left: 5px solid var(--dys-color);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="logo-petit-prince.webp" alt="Logo Petit Prince">
                <h1>SESSAD Petit Prince</h1>
            </a>
            
            <button class="menu-toggle" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <ul class="nav-menu">
                <li><a href="index.html">üè† Accueil</a></li>
                <li><a href="assistant-tdah.html">üß† TDAH</a></li>
                <li><a href="assistant-tsa.html">üß© TSA</a></li>
                <li><a href="assistant-dys.html" class="active">üìö Dys</a></li>
                <li><a href="outils.html">üõ†Ô∏è Outils</a></li>
                <li><a href="ressources.html">üìñ Ressources</a></li>
                <li><a href="contact.html">üìß Contact</a></li>
            </ul>
            
            <div class="nav-accessibility">
                <button id="textSizeBtn" class="accessibility-btn">A+</button>
                <button id="contrastBtn" class="accessibility-btn">‚óê</button>
                <button id="dyslexicBtn" class="accessibility-btn">Dys</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Fil d'Ariane -->
        <nav class="breadcrumb">
            <ul class="breadcrumb-list">
                <li><a href="index.html">Accueil</a></li>
                <li><span class="breadcrumb-separator">‚Ä∫</span></li>
                <li>Assistant Dys</li>
            </ul>
        </nav>

        <!-- Header -->
        <div class="card" style="text-align: center; margin-bottom: 30px;">
            <div style="display: inline-block; animation: float 3s ease-in-out infinite;">
                <img src="logo-petit-prince.webp" alt="Le Petit Prince" style="width: 100px; height: auto; margin-bottom: 20px;">
            </div>
            <h1 class="card-title" style="color: var(--dys-color); font-size: 2.5rem;">üìö Mon Assistant Dys</h1>
            <p style="font-size: 1.2rem; color: #666;">Adaptation de textes et strat√©gies pour dyslexie, dyspraxie, dyscalculie</p>
        </div>

        <!-- Onglets -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('tasks')">üìã Mes T√¢ches</button>
            <button class="tab-btn" onclick="switchTab('adapter')">üìñ Adaptateur de Texte</button>
            <button class="tab-btn" onclick="switchTab('stats')">üìä Mes Statistiques</button>
            <button class="tab-btn" onclick="switchTab('problem')">üß© R√©soudre un Probl√®me</button>
            <button class="tab-btn" onclick="switchTab('situations')">üé™ Situations</button>
            <button class="tab-btn" onclick="switchTab('tips')">üí° Astuces Dys</button>
        </div>

        <!-- T√ÇCHES -->
        <div id="tasks" class="tab-content active">
            <div class="card">
                <h2 class="card-title">üìã Gestion des t√¢ches</h2>
                <p>Organise tes t√¢ches de mani√®re visuelle et structur√©e.</p>
                
                <div style="margin: 30px 0;">
                    <input type="text" id="newTask" placeholder="Ajouter une nouvelle t√¢che..." style="width: 100%; margin-bottom: 15px;">
                    <button onclick="addTask()" class="btn btn-primary" style="width: 100%;">‚ûï Ajouter</button>
                </div>

                <div id="tasksList"></div>
            </div>
        </div>

        <!-- ADAPTATEUR DE TEXTE -->
        <div id="adapter" class="tab-content">
            <div class="card">
                <h2 class="card-title">üìñ Adaptateur de Texte</h2>
                <p>Adapte n'importe quel texte pour le rendre plus facile √† lire avec des options sp√©ciales pour la dyslexie.</p>
                
                <!-- Upload d'image -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 20px; margin: 30px 0; color: white;">
                    <h3 style="color: white; margin-bottom: 20px;">üì∏ Extraire le texte d'une image</h3>
                    <p style="margin-bottom: 20px; opacity: 0.9;">Prends une photo d'un texte (livre, fiche, tableau) et je vais l'extraire automatiquement !</p>
                    
                    <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 20px;">
                        <label for="imageUpload" class="btn" style="background: white; color: #667eea; cursor: pointer; display: inline-block;">
                            üìÅ Choisir une image
                            <input type="file" id="imageUpload" accept="image/*" style="display: none;" onchange="uploadImageToDropl(this)">
                        </label>
                        <label for="cameraCapture" class="btn" style="background: white; color: #667eea; cursor: pointer; display: inline-block;">
                            üì∑ Prendre une photo
                            <input type="file" id="cameraCapture" accept="image/*" capture="environment" style="display: none;" onchange="uploadImageToDropl(this)">
                        </label>
                    </div>
                    
                    <div id="imagePreview" style="margin-top: 20px; display: none;">
                        <img id="previewImg" style="max-width: 300px; border-radius: 10px; border: 3px solid white;">
                    </div>
                    
                    <div id="extractionStatus" style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.2); border-radius: 10px; display: none;"></div>
                </div>

                <!-- Zone de texte original -->
                <div style="margin: 30px 0;">
                    <h3 style="color: var(--dys-color); margin-bottom: 15px;">‚úèÔ∏è Texte original :</h3>
                    <textarea id="originalText" placeholder="Colle ou √©cris ton texte ici, ou utilise l'extraction d'image ci-dessus..." style="width: 100%; min-height: 150px; padding: 15px; font-size: 16px; border: 2px solid var(--dys-color); border-radius: 10px;"></textarea>
                </div>

                <!-- Options d'adaptation -->
                <div class="text-adapter-controls">
                    <div class="control-group">
                        <label for="fontSize">Taille du texte :</label>
                        <select id="fontSize" onchange="updateAdaptedText()">
                            <option value="16">Normal (16px)</option>
                            <option value="18" selected>Grand (18px)</option>
                            <option value="20">Tr√®s grand (20px)</option>
                            <option value="24">Extra large (24px)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="lineSpacing">Espacement des lignes :</label>
                        <select id="lineSpacing" onchange="updateAdaptedText()">
                            <option value="1.5">Normal (1.5)</option>
                            <option value="2" selected>Large (2)</option>
                            <option value="2.5">Tr√®s large (2.5)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="letterSpacing">Espacement des lettres :</label>
                        <select id="letterSpacing" onchange="updateAdaptedText()">
                            <option value="0">Normal</option>
                            <option value="1" selected>1px</option>
                            <option value="2">2px</option>
                            <option value="3">3px</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="wordSpacing">Espacement des mots :</label>
                        <select id="wordSpacing" onchange="updateAdaptedText()">
                            <option value="0">Normal</option>
                            <option value="4" selected>4px</option>
                            <option value="6">6px</option>
                            <option value="8">8px</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="bgColor">Couleur de fond :</label>
                        <select id="bgColor" onchange="updateAdaptedText()">
                            <option value="#FFFEF0">Cr√®me</option>
                            <option value="#E8F5E9">Vert p√¢le</option>
                            <option value="#FFF3E0">P√™che</option>
                            <option value="#E3F2FD">Bleu p√¢le</option>
                            <option value="#FFFFFF">Blanc</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="fontFamily">Police :</label>
                        <select id="fontFamily" onchange="updateAdaptedText()">
                            <option value="Arial">Arial</option>
                            <option value="Verdana">Verdana</option>
                            <option value="'Comic Sans MS'">Comic Sans</option>
                            <option value="'Trebuchet MS'">Trebuchet MS</option>
                            <option value="'Century Gothic'">Century Gothic</option>
                        </select>
                    </div>
                </div>

                <div style="margin: 20px 0;">
                    <label style="display: flex; align-items: center; gap: 10px; font-weight: 600; cursor: pointer;">
                        <input type="checkbox" id="syllabation" onchange="updateAdaptedText()" style="width: 20px; height: 20px;">
                        Activer la syllabation (al-ter-ner les cou-leurs)
                    </label>
                </div>

                <!-- Texte adapt√© -->
                <div style="margin: 30px 0;">
                    <h3 style="color: var(--dys-color); margin-bottom: 15px;">‚ú® Texte adapt√© :</h3>
                    <div id="adaptedText" class="adapted-text-area">
                        Le texte adapt√© appara√Ætra ici...
                    </div>
                </div>

                <!-- Actions -->
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button onclick="copyAdaptedText()" class="btn btn-success">üìã Copier le texte</button>
                    <button onclick="downloadAdaptedText()" class="btn btn-info">üíæ T√©l√©charger (.txt)</button>
                    <button onclick="clearText()" class="btn btn-danger">üóëÔ∏è Effacer tout</button>
                </div>
            </div>
        </div>

        <!-- STATISTIQUES -->
        <div id="stats" class="tab-content">
            <div class="card">
                <h2 class="card-title">üìä Mes Statistiques</h2>
                <p>Visualise tes progr√®s !</p>
                
                <div style="margin: 30px 0;">
                    <canvas id="statsChart" style="max-height: 400px;"></canvas>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
                    <div style="background: #E8F5E9; padding: 20px; border-radius: 15px; text-align: center;">
                        <div style="font-size: 2.5rem; color: var(--success);">‚úì</div>
                        <div style="font-size: 2rem; font-weight: 700;" id="completedCount">0</div>
                        <div style="color: #666;">T√¢ches termin√©es</div>
                    </div>
                    <div style="background: #FFF3E0; padding: 20px; border-radius: 15px; text-align: center;">
                        <div style="font-size: 2.5rem; color: var(--warning);">‚è≥</div>
                        <div style="font-size: 2rem; font-weight: 700;" id="pendingCount">0</div>
                        <div style="color: #666;">En cours</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- R√âSOUDRE UN PROBL√àME -->
        <div id="problem" class="tab-content">
            <div class="card">
                <h2 class="card-title">üß© R√©soudre un Probl√®me</h2>
                <p>D√©compose un probl√®me en √©tapes simples.</p>
                
                <div style="margin: 30px 0;">
                    <h3 style="color: var(--dys-color); margin-bottom: 15px;">‚ùì Quel est ton probl√®me ?</h3>
                    <textarea id="problemDesc" placeholder="D√©cris ton probl√®me ici..." style="height: 100px;"></textarea>
                </div>

                <div style="margin: 30px 0;">
                    <h3 style="color: var(--dys-color); margin-bottom: 15px;">üí° Solutions possibles :</h3>
                    <div id="solutionsArea"></div>
                    <button onclick="addSolution()" class="btn btn-success" style="margin-top: 15px;">‚ûï Ajouter une solution</button>
                </div>
            </div>
        </div>

        <!-- SITUATIONS -->
        <div id="situations" class="tab-content">
            <div class="card">
                <h2 class="card-title">üé™ Situations du quotidien</h2>
                <p>Des strat√©gies pour g√©rer les situations difficiles li√©es aux troubles Dys.</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
                    <div style="background: #E0F2F1; padding: 25px; border-radius: 15px;">
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">üìñ Lecture difficile</h3>
                        <p style="margin-bottom: 15px; color: #666;"><strong>Strat√©gies :</strong></p>
                        <ul style="margin-left: 20px; line-height: 1.8;">
                            <li>Utilise une r√®gle pour suivre la ligne</li>
                            <li>Cache le reste du texte</li>
                            <li>Prends des pauses r√©guli√®res</li>
                            <li>Surligne les mots-cl√©s</li>
                        </ul>
                    </div>

                    <div style="background: #FFF9C4; padding: 25px; border-radius: 15px;">
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">‚úçÔ∏è √âcriture fatigante</h3>
                        <p style="margin-bottom: 15px; color: #666;"><strong>Strat√©gies :</strong></p>
                        <ul style="margin-left: 20px; line-height: 1.8;">
                            <li>Fais des pauses toutes les 5 minutes</li>
                            <li>Utilise un ordinateur si possible</li>
                            <li>√âcris moins mais mieux</li>
                            <li>Dessine plut√¥t que d'√©crire si c'est autoris√©</li>
                        </ul>
                    </div>

                    <div style="background: #E1BEE7; padding: 25px; border-radius: 15px;">
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">üî¢ Math√©matiques complexes</h3>
                        <p style="margin-bottom: 15px; color: #666;"><strong>Strat√©gies :</strong></p>
                        <ul style="margin-left: 20px; line-height: 1.8;">
                            <li>Utilise du mat√©riel concret (jetons, cubes)</li>
                            <li>Dessine les probl√®mes</li>
                            <li>V√©rifie avec une calculatrice</li>
                            <li>D√©compose en petites √©tapes</li>
                        </ul>
                    </div>

                    <div style="background: #FFCCBC; padding: 25px; border-radius: 15px;">
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">üéØ Organisation difficile</h3>
                        <p style="margin-bottom: 15px; color: #666;"><strong>Strat√©gies :</strong></p>
                        <ul style="margin-left: 20px; line-height: 1.8;">
                            <li>Un code couleur pour chaque mati√®re</li>
                            <li>Checklist visuelle</li>
                            <li>Range au fur et √† mesure</li>
                            <li>Demande de l'aide pour v√©rifier</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- ASTUCES DYS -->
        <div id="tips" class="tab-content">
            <div class="card">
                <h2 class="card-title">üí° Astuces Dys</h2>
                <p>Des conseils pratiques pour mieux vivre avec les troubles Dys au quotidien.</p>
                
                <div style="margin-top: 30px;">
                    <div class="astuce-card">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üìñ</div>
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">Dyslexie - Strat√©gies de lecture</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Police sans-serif :</strong> Arial, Verdana sont plus faciles √† lire</li>
                            <li><strong>Espacement :</strong> Augmente l'espace entre les lignes et les lettres</li>
                            <li><strong>Couleurs :</strong> Utilise des fonds color√©s (beige, bleu p√¢le)</li>
                            <li><strong>R√®gle :</strong> Suit la ligne avec une r√®gle ou ton doigt</li>
                            <li><strong>Audio :</strong> Utilise des livres audio en compl√©ment</li>
                            <li><strong>Pauses :</strong> Fais des pauses toutes les 10-15 minutes</li>
                        </ul>
                    </div>

                    <div class="astuce-card">
                        <div style="font-size: 3rem; margin-bottom: 15px;">‚úçÔ∏è</div>
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">Dysgraphie - Faciliter l'√©criture</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Stylo adapt√© :</strong> Grip ergonomique, stylo √©pais</li>
                            <li><strong>Ordinateur :</strong> Privil√©gie le clavier quand c'est possible</li>
                            <li><strong>Papier lign√© :</strong> Lignes color√©es ou Seyes agrandi</li>
                            <li><strong>Brouillon :</strong> Autorise-toi √† faire des brouillons</li>
                            <li><strong>Dict√©e vocale :</strong> Utilise la reconnaissance vocale</li>
                            <li><strong>Quantit√© :</strong> √âcris moins, mais mieux</li>
                        </ul>
                    </div>

                    <div class="astuce-card">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üî¢</div>
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">Dyscalculie - Comprendre les maths</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Mat√©riel concret :</strong> Jetons, cubes, boulier</li>
                            <li><strong>Dessins :</strong> Illustre les probl√®mes</li>
                            <li><strong>Tables affich√©es :</strong> Garde les tables sous les yeux</li>
                            <li><strong>Calculatrice :</strong> Autoris√©e pour v√©rifier</li>
                            <li><strong>√âtapes :</strong> D√©compose chaque calcul</li>
                            <li><strong>Couleurs :</strong> Code couleur pour les op√©rations</li>
                        </ul>
                    </div>

                    <div class="astuce-card">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üèÉ</div>
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">Dyspraxie - Organisation et motricit√©</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Routine visuelle :</strong> Images des √©tapes √† suivre</li>
                            <li><strong>Pr√©paration :</strong> Pr√©pare le soir pour le lendemain</li>
                            <li><strong>Codes couleurs :</strong> Une couleur par mati√®re</li>
                            <li><strong>Aide ext√©rieure :</strong> Demande de l'aide pour v√©rifier</li>
                            <li><strong>Outils adapt√©s :</strong> Ciseaux ergonomiques, compas aide</li>
                            <li><strong>Temps :</strong> Prends ton temps, pas de pression</li>
                        </ul>
                    </div>

                    <div class="astuce-card">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üó£Ô∏è</div>
                        <h3 style="color: var(--dys-color); margin-bottom: 10px;">Dysphasie - Communication orale</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Temps :</strong> Prends le temps de formuler</li>
                            <li><strong>Reformulation :</strong> N'h√©site pas √† reformuler</li>
                            <li><strong>Gestes :</strong> Aide-toi avec des gestes</li>
                            <li><strong>Pictogrammes :</strong> Utilise des images si besoin</li>
                            <li><strong>Environnement calme :</strong> √âvite le bruit de fond</li>
                            <li><strong>√âcriture :</strong> √âcris si parler est trop difficile</li>
                        </ul>
                    </div>

                    <div class="astuce-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üí™</div>
                        <h3 style="color: white; margin-bottom: 10px;">G√©n√©ral - Conseils transversaux</h3>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Accepte ton fonctionnement :</strong> Tu n'es pas "nul", tu fonctionnes diff√©remment</li>
                            <li><strong>Am√©nagements :</strong> Demande ce dont tu as besoin (tiers-temps, ordinateur...)</li>
                            <li><strong>Fatigue :</strong> Respecte tes limites, fais des pauses</li>
                            <li><strong>Points forts :</strong> Concentre-toi sur ce que tu r√©ussis</li>
                            <li><strong>Communication :</strong> Explique tes besoins aux autres</li>
                            <li><strong>Aide :</strong> N'h√©site jamais √† demander de l'aide</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Navigation</h3>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="ressources.html">Ressources</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Assistants</h3>
                <ul>
                    <li><a href="assistant-tdah.html">Assistant TDAH</a></li>
                    <li><a href="assistant-tsa.html">Assistant TSA</a></li>
                    <li><a href="assistant-dys.html">Assistant Dys</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>L√©gal</h3>
                <ul>
                    <li><a href="mentions-legales.html">Mentions l√©gales</a></li>
                    <li><a href="rgpd.html">RGPD</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 SESSAD Petit Prince - Tous droits r√©serv√©s</p>
        </div>
    </footer>

    <button class="back-to-top" aria-label="Retour en haut">‚Üë</button>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script>
        // GESTION DES T√ÇCHES
        let tasks = JSON.parse(localStorage.getItem('dys_tasks')) || [];

        function addTask() {
            const taskInput = document.getElementById('newTask');
            
            if (!taskInput.value.trim()) {
                Utils.showToast('‚ùå Entre une t√¢che !', 'error');
                return;
            }
            
            const task = {
                id: Utils.generateId(),
                text: taskInput.value.trim(),
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            tasks.push(task);
            saveTasks();
            renderTasks();
            taskInput.value = '';
            Utils.showToast('‚úì T√¢che ajout√©e !', 'success');
        }

        function toggleTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                saveTasks();
                renderTasks();
                updateStats();
            }
        }

        function deleteTask(id) {
            if (confirm('Supprimer cette t√¢che ?')) {
                tasks = tasks.filter(t => t.id !== id);
                saveTasks();
                renderTasks();
                updateStats();
            }
        }

        function renderTasks() {
            const container = document.getElementById('tasksList');
            
            if (tasks.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">Aucune t√¢che. Ajoute-en une !</p>';
                return;
            }
            
            const pending = tasks.filter(t => !t.completed);
            const completed = tasks.filter(t => t.completed);
            
            container.innerHTML = `
                ${pending.length ? '<h3 style="color: var(--dys-color); margin: 20px 0 10px;">üìù √Ä faire</h3>' : ''}
                ${pending.map(task => createTaskHTML(task)).join('')}
                
                ${completed.length ? '<h3 style="color: #999; margin: 20px 0 10px;">‚úì Termin√©es</h3>' : ''}
                ${completed.map(task => createTaskHTML(task)).join('')}
            `;
        }

        function createTaskHTML(task) {
            return `
                <div class="task-item ${task.completed ? 'completed' : ''}" style="${task.completed ? 'opacity: 0.6; text-decoration: line-through;' : ''}">
                    <input type="checkbox" ${task.completed ? 'checked' : ''} onchange="toggleTask('${task.id}')" style="width: 24px; height: 24px; cursor: pointer;">
                    <span style="flex: 1;">${task.text}</span>
                    <button onclick="deleteTask('${task.id}')" style="background: #FF6B6B; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer;">üóë</button>
                </div>
            `;
        }

        function saveTasks() {
            localStorage.setItem('dys_tasks', JSON.stringify(tasks));
        }

        function updateStats() {
            const completed = tasks.filter(t => t.completed).length;
            const pending = tasks.filter(t => !t.completed).length;
            
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('pendingCount').textContent = pending;
        }

        // ADAPTATEUR DE TEXTE
        document.getElementById('originalText').addEventListener('input', updateAdaptedText);

        function updateAdaptedText() {
            const text = document.getElementById('originalText').value;
            const fontSize = document.getElementById('fontSize').value;
            const lineSpacing = document.getElementById('lineSpacing').value;
            const letterSpacing = document.getElementById('letterSpacing').value;
            const wordSpacing = document.getElementById('wordSpacing').value;
            const bgColor = document.getElementById('bgColor').value;
            const fontFamily = document.getElementById('fontFamily').value;
            const syllabation = document.getElementById('syllabation').checked;
            
            const adaptedDiv = document.getElementById('adaptedText');
            
            if (!text.trim()) {
                adaptedDiv.textContent = 'Le texte adapt√© appara√Ætra ici...';
                return;
            }
            
            let processedText = text;
            
            if (syllabation) {
                processedText = separateSyllables(text);
            }
            
            adaptedDiv.innerHTML = processedText;
            adaptedDiv.style.fontSize = fontSize + 'px';
            adaptedDiv.style.lineHeight = lineSpacing;
            adaptedDiv.style.letterSpacing = letterSpacing + 'px';
            adaptedDiv.style.wordSpacing = wordSpacing + 'px';
            adaptedDiv.style.background = bgColor;
            adaptedDiv.style.fontFamily = fontFamily;
        }

        function separateSyllables(text) {
            const words = text.split(' ');
            return words.map(word => {
                const syllables = word.match(/[^aeiouy√†√¢√§√©√®√™√´√Ø√Æ√¥√∂√π√ª√º√ø≈ì√¶]*[aeiouy√†√¢√§√©√®√™√´√Ø√Æ√¥√∂√π√ª√º√ø≈ì√¶]+/gi) || [word];
                return syllables.map((syl, i) => `<span class="syllable">${syl}</span>`).join('');
            }).join(' ');
        }

        function copyAdaptedText() {
            const text = document.getElementById('adaptedText').textContent;
            Utils.copyToClipboard(text);
        }

        function downloadAdaptedText() {
            const text = document.getElementById('adaptedText').textContent;
            Utils.downloadFile(text, 'texte-adapte.txt', 'text/plain');
        }

        function clearText() {
            if (confirm('Effacer tout le texte ?')) {
                document.getElementById('originalText').value = '';
                document.getElementById('adaptedText').textContent = 'Le texte adapt√© appara√Ætra ici...';
            }
        }

        // UPLOAD IMAGE AVEC API DROPL
        async function uploadImageToDropl(input) {
            const file = input.files[0];
            if (!file) return;
            
            // Pr√©visualisation
            const preview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            const reader = new FileReader();
            
            reader.onload = function(e) {
                previewImg.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
            
            // Status
            const statusDiv = document.getElementById('extractionStatus');
            statusDiv.style.display = 'block';
            statusDiv.textContent = '‚è≥ Extraction du texte en cours...';
            
            try {
                const formData = new FormData();
                formData.append('file', file);
                
                const response = await fetch('https://api.dropl.fr/upload', {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) throw new Error('Erreur API');
                
                const data = await response.json();
                const extractedText = data.text || data.content || data.extracted_text || JSON.stringify(data);
                
                document.getElementById('originalText').value = extractedText;
                updateAdaptedText();
                
                statusDiv.style.background = 'rgba(76, 175, 80, 0.3)';
                statusDiv.textContent = '‚úÖ Texte extrait avec succ√®s !';
                
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 3000);
                
            } catch (error) {
                console.error('Erreur:', error);
                statusDiv.style.background = 'rgba(244, 67, 54, 0.3)';
                statusDiv.textContent = '‚ùå Erreur lors de l\'extraction. Essaie avec une autre image ou entre le texte manuellement.';
            }
        }

        // R√âSOUDRE UN PROBL√àME
        function addSolution() {
            const container = document.getElementById('solutionsArea');
            const div = document.createElement('div');
            div.style.cssText = 'margin: 10px 0; padding: 15px; background: #f0f0f0; border-radius: 10px;';
            div.innerHTML = `
                <input type="text" placeholder="D√©cris une solution possible..." style="width: 85%; margin-right: 10px;">
                <button onclick="this.parentElement.remove()" style="background: #FF6B6B; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer;">‚úï</button>
            `;
            container.appendChild(div);
        }

        // Initialisation
        renderTasks();
        updateStats();
    </script>
</body>
</html>
